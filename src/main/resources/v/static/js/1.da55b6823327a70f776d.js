webpackJsonp([1],{"+KeF":function(e,t,a){var r=a("w4E4"),o=a("xhIC"),l=a("ei60");e.exports=function(e,t){var a=(o.Object||{})[e]||Object[e],s={};s[e]=t(a),r(r.S+r.F*l(function(){a(1)}),"Object",s)}},"7f00":function(e,t,a){var r=a("U0jo"),o=a("nMsj");a("+KeF")("keys",function(){return function(e){return o(r(e))}})},Mk5l:function(e,t,a){a("7f00"),e.exports=a("xhIC").Object.keys},VEit:function(e,t){},ZLEe:function(e,t,a){e.exports={default:a("Mk5l"),__esModule:!0}},vGBm:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=a("a3Yh"),l=a.n(o),s=a("ZLEe"),n=a.n(s),i=a("hRKE"),c=a.n(i),d=a("4YfN"),u=a.n(d),m=a("e8d8"),f=a("UZd0"),p=a("dqLd"),b={name:"MultipleItems",components:{Breadcrumb:m.a},data:function(){var e={checked1:!1,submitType:2,country:p.a.dropValue,address:{cityName:"",stateName:"",postCode:"",addressLine1:"",addressLine2:""},billType:"",abn:"",businessName:"",firstName:"",lastName:"",email:"",sendEmail:"",contactNumber:"",products:[],productList:[],purchaseOrder:"",amount:"",checked:!1,type:3};return{reviewForm:{},reviewData:[],reviewDia:!1,submitLoading:!1,reviewLoading:!1,shippingAddressRadio:"",billTypes:[{value:"Business",label:"Business"},{value:"Individual",label:"Individual"}],warrantyTypes:[{value:"W5YP",label:"Additional 5 Years Parts Warranty"},{value:"W5YS",label:"Additional 5 Years Standard Warranty"}],options:[{value:"AU",label:"Australia"},{value:"2",label:"选项2"}],breadcrumbList:[{path:"/warranty/extension",name:"Warranty"},{path:"/warranty/extension",name:"Extension"},{path:"/warranty/extension/multipleItems",name:"Multiple Items"}],fileList:[],productId:"",formMod:e,form:u()({},e),rowData:{},devicePower:null}},methods:(r={openTerm:function(){window.open("../../../sun-portal/v/static/Sungrow Manufacturer Warranty.pdf")},disableType:function(e){var t=this.form.productList.map(function(e){return e.warrantyType});return console.log(t),-1!=t.indexOf(e)},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},review:function(){0==this.form.email.length?this.$message.error("email is required"):0==this.form.contactNumber.length?this.$message.error("contactNumber is required"):1==(this.form.firstName+" "+this.form.lastName).length?this.$message.error("contactName is required"):this.form.address.addressLine1&&this.form.address.addressLine2&&this.form.address.cityName&&this.form.address.stateName&&this.form.address.postCode?0==this.form.productList.length?this.$message.error("product list is required"):this.reviewRequest():this.$message.error("address is required")},reviewRequest:function(){var e=this;this.reviewLoading=!0,Object(f.d)(this.form.productList).then(function(t){1==t.data.code?(e.reviewLoading=!1,e.reviewDia=!0,e.reviewData=t.data.data.products,e.reviewForm=t.data.data):(e.reviewLoading=!1,e.$message.error(t.data.msg))}).catch(function(t){e.reviewLoading=!1,console.log(t)})},rowClick:function(e){this.rowData=e},addRow:function(e){1==e?this.form.products.push({serialNumber:"",productId:"",productModel:"",warrantyType:"",amount:"",deliveryDate:"",businessPartner:""}):this.form.productList.push({serialNumbers:"",warrantyType:""})},delRow:function(e,t){1==t?this.form.products.splice(e,1):this.form.productList.splice(e,1),this.getAmount()},getAmount:function(){var e=this;Object(f.c)(this.form.products.map(function(t){return u()({},t,{devicePower:e.devicePower})})).then(function(t){1==t.data.code&&(e.form.products=t.data.data)})},submitUpload:function(){this.$refs.upload.submit()},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},getProductInfo:function(e){var t=this;this.form.products[e].serialNumber?Object(f.b)(this.form.products[e].serialNumber).then(function(a){1==a.data.code&&(t.form.products[e].productId=a.data.data.id,t.form.products[e].productModel=a.data.data.productModelValue,t.form.products[e].deliveryDate=a.data.data.deliveryDate,t.form.products[e].businessPartner=a.data.data.businessPartner,t.devicePower=a.data.data.devicePower)}).catch(function(a){t.form.products[e].productModel="",console.log(a)}):this.form.products[e].productModel=""},onSubmit:function(){var e=this;this.submitLoading=!0,this.form.country=p.a.dropValue;var t=new FormData,a=this.form;for(var r in a)if("object"==c()(a[r]))for(var o in a[r])if("object"==c()(a[r][o]))for(var l in a[r][o])(a[r][o][l]||0===a[r][o][l])&&(a[r].constructor===Array?t.append(r+"["+o+"]."+l,a[r][o][l]):t.append(r+"."+o+"."+l,a[r][o][l]));else(a[r][o]||0===a[r][o])&&t.append(r+"."+o,a[r][o]);else(a[r]||0===a[r])&&t.append(r,a[r]);t.append("multiple",this.form.checked1),this.form.productList.forEach(function(e,a){n()(e).forEach(function(r){t.append("multipleProduct["+a+"]."+r,e[r])})}),Object(f.i)(t).then(function(t){if(1==t.data.code){e.submitLoading=!1,e.$message.success("submitted successfully, Doc No."+t.data.data+"and will jump to home page in 3 seconds");var a=setTimeout(function(){e.$router.push({name:"Home"}),clearTimeout(a)},3e3)}}).catch(function(t){e.submitLoading=!1})},reset:function(){this.form=u()({},this.formMod)},changeFile:function(e){console.log(e)}},l()(r,"submitUpload",function(){this.$refs.upload.submit()}),l()(r,"handleRemove",function(e,t){console.log(e,t)}),l()(r,"handlePreview",function(e){console.log(e)}),r),mounted:function(){var e=this;p.a.$on("dropValue",function(t){e.form.country=t})}},v={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticClass:"multipleItems",attrs:{direction:"vertical"}},[r("Breadcrumb",{attrs:{breadcrumbList:e.breadcrumbList}}),e._v(" "),r("div",{staticClass:"desc"},[r("img",{attrs:{src:a("Ba9w"),alt:"图片"}})]),e._v(" "),r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.reviewLoading,expression:"reviewLoading"}],ref:"form",staticClass:"form",attrs:{disabled:e.submitLoading,size:"small",model:e.form,"label-width":"80px","label-position":"top"}},[r("h2",[e._v("Billing Details")]),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"Type"}},[r("el-select",{attrs:{placeholder:"",clearable:"",filterable:""},model:{value:e.form.billType,callback:function(t){e.$set(e.form,"billType",t)},expression:"form.billType"}},e._l(e.billTypes,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),"AU"==e.form.country?r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"ABN"}},[r("el-input",{attrs:{disabled:"Individual"==e.form.billType},model:{value:e.form.abn,callback:function(t){e.$set(e.form,"abn",t)},expression:"form.abn"}})],1)],1):e._e(),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"Business Name"}},[r("el-input",{attrs:{disabled:"Individual"==e.form.billType},model:{value:e.form.businessName,callback:function(t){e.$set(e.form,"businessName",t)},expression:"form.businessName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"Address Line 1"}},[r("el-input",{model:{value:e.form.address.addressLine1,callback:function(t){e.$set(e.form.address,"addressLine1",t)},expression:"form.address.addressLine1"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"Address Line 2"}},[r("el-input",{model:{value:e.form.address.addressLine2,callback:function(t){e.$set(e.form.address,"addressLine2",t)},expression:"form.address.addressLine2"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"City/District"}},[r("el-input",{model:{value:e.form.address.cityName,callback:function(t){e.$set(e.form.address,"cityName",t)},expression:"form.address.cityName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"State/Province"}},[r("el-input",{model:{value:e.form.address.stateName,callback:function(t){e.$set(e.form.address,"stateName",t)},expression:"form.address.stateName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"Post code"}},[r("el-input",{model:{value:e.form.address.postCode,callback:function(t){e.$set(e.form.address,"postCode",t)},expression:"form.address.postCode"}})],1)],1)],1),e._v(" "),r("h2",[e._v("Contact Details")]),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"First name"}},[r("el-input",{model:{value:e.form.firstName,callback:function(t){e.$set(e.form,"firstName",t)},expression:"form.firstName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"Last name"}},[r("el-input",{model:{value:e.form.lastName,callback:function(t){e.$set(e.form,"lastName",t)},expression:"form.lastName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"Email"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-message"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"Confirm your Email"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-message"},model:{value:e.form.sendEmail,callback:function(t){e.$set(e.form,"sendEmail",t)},expression:"form.sendEmail"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"Contact Number"}},[r("el-input",{model:{value:e.form.contactNumber,callback:function(t){e.$set(e.form,"contactNumber",t)},expression:"form.contactNumber"}})],1)],1)],1),e._v(" "),r("h2",[e._v("Product list")]),e._v(" "),r("el-row",{attrs:{gutter:20}}),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"Purchase Order"}},[r("el-input",{model:{value:e.form.purchaseOrder,callback:function(t){e.$set(e.form,"purchaseOrder",t)},expression:"form.purchaseOrder"}})],1)],1)],1)],1),e._v(" "),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"Type"}},[r("el-checkbox",{model:{value:e.form.checked1,callback:function(t){e.$set(e.form,"checked1",t)},expression:"form.checked1"}},[e._v("Please select here to add multiple inverters")])],1)],1),e._v(" "),e.form.checked1?e._e():r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form.products,"show-summary":""},on:{"row-click":e.rowClick}},[r("el-table-column",{attrs:{prop:"",label:"Serial number",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{label:""}},[r("el-input",{attrs:{size:"small"},on:{change:function(a){return e.getProductInfo(t.$index)}},model:{value:t.row.serialNumber,callback:function(a){e.$set(t.row,"serialNumber",a)},expression:"scope.row.serialNumber"}})],1)]}}],null,!1,1097250198)}),e._v(" "),r("el-table-column",{attrs:{prop:"",label:"Product model",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{label:""}},[r("el-input",{attrs:{disabled:"",size:"small",readonly:!0},model:{value:t.row.productModel,callback:function(a){e.$set(t.row,"productModel",a)},expression:"scope.row.productModel"}})],1)]}}],null,!1,1315995639)}),e._v(" "),r("el-table-column",{attrs:{prop:"",label:"Warranty type"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{label:""}},[r("el-select",{attrs:{placeholder:"",clearable:"",filterable:"",disabled:!t.row.productModel},on:{change:function(a){return e.getAmount(t.$index)},clear:function(a){e.form.products[t.$index].amount=""}},model:{value:t.row.warrantyType,callback:function(a){e.$set(t.row,"warrantyType",a)},expression:"scope.row.warrantyType"}},e._l(e.warrantyTypes,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]}}],null,!1,3178126610)}),e._v(" "),r("el-table-column",{attrs:{prop:"amount",label:"Amount"}}),e._v(" "),r("el-table-column",{attrs:{prop:"",label:"Amount"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return e.addRow(1)}}},[e._v("Add")])]}},{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.delRow(t.$index,1)}}},[e._v("Delete")])]}}],null,!1,1658667227)})],1),e._v(" "),e.form.checked1?r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form.productList},on:{"row-click":e.rowClick}},[r("el-table-column",{attrs:{prop:"",label:"Warranty type"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{label:""}},[r("el-select",{attrs:{placeholder:"",clearable:"",filterable:""},model:{value:t.row.warrantyType,callback:function(a){e.$set(t.row,"warrantyType",a)},expression:"scope.row.warrantyType"}},e._l(e.warrantyTypes,function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value,disabled:e.disableType(t.value)}})}),1)],1)]}}],null,!1,757904832)}),e._v(" "),r("el-table-column",{attrs:{prop:"",label:"Serial number List",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{label:""}},[r("el-input",{attrs:{placeholder:'Please enter the device serial number separated by ","',type:"textarea",resize:"none",rows:4,size:"small"},model:{value:t.row.serialNumbers,callback:function(a){e.$set(t.row,"serialNumbers",a)},expression:"scope.row.serialNumbers"}})],1)]}}],null,!1,3274553589)}),e._v(" "),r("el-table-column",{attrs:{prop:"",label:"Amount"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return e.addRow(2)}}},[e._v("Add")])]}},{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.delRow(t.$index,2)}}},[e._v("Delete")])]}}],null,!1,935179323)})],1):e._e()],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:" "}},[r("el-checkbox",{model:{value:e.form.checked,callback:function(t){e.$set(e.form,"checked",t)},expression:"form.checked"}},[e._v("I have read and agree to "),r("el-button",{attrs:{type:"text"},on:{click:e.openTerm}},[e._v("Sungrow's warranty terms.")])],1)],1)],1)],1),e._v(" "),r("el-form-item",{staticClass:"sub"},[e.form.checked1?r("el-button",{attrs:{type:"primary",loading:e.reviewLoading},on:{click:e.review}},[e._v("Review")]):e._e(),e._v(" "),r("el-button",{attrs:{type:"primary",disabled:!e.form.checked},on:{click:e.onSubmit}},[e._v("Submit")]),e._v(" "),r("el-button",{on:{click:e.reset}},[e._v("reset")])],1)],1),e._v(" "),r("el-dialog",{staticClass:"dia",attrs:{title:"Order Review",visible:e.reviewDia,width:"600px","before-close":e.handleClose},on:{"update:visible":function(t){e.reviewDia=t}}},[r("h3",[e._v("Please check all the contents below. If any items are incorrect, please go back to the form and update before submitting.")]),e._v(" "),r("el-form",{attrs:{size:"small",model:e.reviewForm,"label-width":"auto","label-position":"top"}},[r("el-row",{staticStyle:{"border-bottom":"1px dashed #000"},attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"Business name:"}},[e._v("\n          "+e._s(e.form.businessName)+"\n        ")])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"Contact name:"}},[e._v("\n          "+e._s(e.form.firstName+" "+e.form.lastName)+"\n          \n    ")])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"Email address:"}},[e._v("\n          "+e._s(e.form.email)+"\n          \n    ")])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"Contact number:"}},[e._v("\n          "+e._s(e.form.contactNumber)+"\n      \n    ")])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"Address:"}},[e._v("\n          "+e._s(e.form.address.addressLine1+","+e.form.address.addressLine2+","+e.form.address.stateName+","+e.form.address.cityName+" "+e.form.address.postCode)+"\n      \n    ")])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"ABN:"}},[e._v("\n          "+e._s(e.form.abn)+"\n      \n    ")])],1)],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"Total item:"}},[e._v("\n      "+e._s("$ "+e.reviewForm.item)+"\n    ")])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"Total amount (excl. GST):"}},[e._v("\n      "+e._s("$ "+e.reviewForm.exclGst)+"\n      \n    ")])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"Total GST:"}},[e._v("\n      "+e._s("$ "+e.reviewForm.gst)+"\n      \n    ")])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"Total amount (incl. GST):"}},[e._v("\n      "+e._s("$ "+e.reviewForm.inclGst)+"\n      \n    ")])],1)],1)],1),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.reviewData}},[r("el-table-column",{attrs:{prop:"productModel",label:"Product model",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"serialNumber",label:"Serial number",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"type",label:"Warranty type",width:"300"}}),e._v(" "),r("el-table-column",{attrs:{prop:"amount",label:"Amount",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s("$ "+t.row.amount)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"discount",label:"Discount",width:"180"}})],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(t){e.reviewDia=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.reviewDia=!1}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var h=a("C7Lr")(b,v,!1,function(e){a("VEit")},null,null);t.default=h.exports}});
//# sourceMappingURL=1.da55b6823327a70f776d.js.map